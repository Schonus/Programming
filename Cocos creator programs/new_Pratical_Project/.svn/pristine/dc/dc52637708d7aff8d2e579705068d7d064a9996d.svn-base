{"version":3,"sources":["assets\\resources\\script\\PlayerControl.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["const {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class PlayerControl extends cc.Component {\n\n    //定义飞机速度\n    @property\n    speedX: number = 0;\n    speedY: number = 0;\n\n    //加载子弹控件\n    @property(cc.Prefab)\n    PreBullet:cc.Prefab = null;\n\n\n    onLoad () \n    {\n        let self = this;\n        //————————————————————飞机移动部分——————————————————————\n        // 设定移动和静止函数操作，习惯把实现函数写在外面\n        //飞机移动\n        let func1 = function(event) {\n            // 判断输入的是哪个键\n            switch (event.keyCode) {\n                case 37://左键\n                case 65://a\n                    self.speedX = -200;\n                    break;\n                case 39://右键\n                case 68://d\n                    self.speedX = 200;\n                    break;\n                case 38://上键\n                case 87://w\n                    self.speedY = +200;\n                break;\n                case 40://下键\n                case 83://s\n                    self.speedY = -200;\n                    break;\n                default:\n                    break;\n            }\n        }\n        //飞机停止\n        let func2 = function(event) {\n            // 判断输入的是哪个键\n            switch (event.keyCode) {\n                case 37://左键\n                case 65://a\n                    if(self.speedX < 0)\n                    {\n                        self.speedX = 0;\n                    }\n                    break;\n                case 39://右键\n                case 68://d\n                    if(self.speedX > 0)\n                    {\n                        self.speedX = 0;\n                    }\n                    break;\n                case 38://上键\n                case 87://w\n                    if(self.speedY > 0)\n                    {\n                        self.speedY = 0;\n                    }\n                break;\n                case 40://下键\n                case 83://s\n                    if(self.speedY < 0)\n                    {\n                        self.speedY = 0;\n                    }\n                    break;\n                default:\n                    break;\n            }\n        }\n        //键盘监听函数\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,func1);\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,func2);\n        //玩家攻击\n        // 外面定义函数\n        let func3 = function(event)\n        {\n            let bullet = cc.instantiate(self.PreBullet);\n            //为什么这里会出null\n            if(bullet != null)\n            {\n                bullet.setParent(cc.find(\"Canvas/Main Camera\"));\n                bullet.x = this.node.x;\n                bullet.y = this.node.y;\n            }\n        }\n        //定义函数\n        this.schedule(func3,0.5);\n\n        \n    }\n    \n    start () {\n        //————————————————————飞机碰撞箱部分————————————————————\n        cc.director.getCollisionManager().enabled = true;\n\n    }\n\n    //产生碰撞\n    onCollisionEnter(other)\n    {\n        \n    }\n\n    update (dt) \n    {\n        //玩家移动\n        //边框判定和实现X、Y轴位移\n        if(( (this.node.x >= -190) && (this.speedX < 0) )||( (this.node.x <= 190) && (this.speedX > 0 ) ))\n        {\n            this.node.x += this.speedX * dt;\n        }\n        //Y轴与X轴同理\n        if(( (this.node.y >= -364) && (this.speedY < 0) )||( (this.node.y <= 364) && (this.speedY > 0 ) ))\n        {\n            this.node.y += this.speedY * dt;\n        }\n\n        \n    }\n    onDestroy() {\n        //这里可能有问题\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN);\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP);\n    }\n}\n"]}